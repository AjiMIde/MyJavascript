## Asyn 异步

#### 并发
* 指两个以上的计算过程在资源共享的情况下同时执行的能力。并发进程只应用于非确定性、非关联的问题，即任务的状态、顺序不重要
* **优势**
* 增加了同时运行程序的数量
* 可将任务按任意顺序执行（不必等待消耗时间未知的任务）
* 应用程序不必去等待耗时任务（可以一直运行）
* **缺点**
* 当有两个以上的任务有关联时（互为先决条件），会无限期地互相等待，造成死锁
* 竞争条件
* 并发操作的管理比同步相比更复杂
* 并发程序消耗更多的资源


#### JavaScript 模拟并发：
* `setInterval()`, `setTimeout()`
* `XMLHttpRequest()`
* `worker()`


#### JavaScript 事件循环
* 与其他语言不同，JavaScript 的事件循环设计成一个运行至完成的环境，意味着 `JavaScript` 开始执行一个任务时，在任务完成之前都不会被中断；
* `JavaScript` 通过**非阻塞I/O机制来使到来的消息在其他操作完成时排序等待


#### 堆(Heap), 桢(Frame), 栈(Stack)，队列(Queue)
* 堆是内存中顺序无关的窗口。堆是 `JavaScript` 存放正在使用或未被垃圾回收清理的变量和对象；
* 桢是事件循环周期中需要被执行的连续工作单元。桢包含把函数对象和堆中的变更链接在一起执行上下方；
* 事件循环栈包含了执行一个消息所需要的所有连续的桢。事件循环自顶向下处理桢。
* 队列 是等待处理的消息的列表。每条消息都引用一个 `JavaScript` 的函数。

```js
// 其中，变量如 a, b, num 是一个堆 Heap
// sum, addOne 则是一个桢 Frame
// addOne(10), sum, addOne 则形成一个栈
// addOne(10), addOne(20), addOne(30)，则是一个队列
var sum = (a, b) => {
  return a + b
}

var addOne = (num) => {
  return sum(1, num)
}

addOne(10)
addOne(20)
addOne(30)
```
